<!DOCTYPE html>
<html>
  <head>
    <title>Twitter-based Alerts of Major Disasters</title>
    <meta charset="utf-8">
    <meta name="author" content="Rachael A. Callcut, MD, MSPH &amp; Sara E. Moore, MA" />
    <meta name="date" content="2017-11-13" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <link rel="stylesheet" href="custom.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

# Twitter-based Alerts of Major Disasters
## Biomedical Big Data Seminar
### Rachael A. Callcut, MD, MSPH &amp; Sara E. Moore, MA
### 13 November 2017

---







# How to access these slides

### Via git:


```bash
git clone https://github.com/saraemoore/TwitterTraumaBBD2017.git
```

### Download directly:
https://github.com/saraemoore/TwitterTraumaBBD2017/archive/master.zip

### View online:
http://saraemoore.github.io/TwitterTraumaBBD2017

???

* I won't be showing all the code on the slides today, but it's all available in the R Markdown document used to create these slides in this repository on github, or in the corresponding R script that's also in the github repository.

---

# The paper

&lt;!--
&lt;sup&gt;1&lt;/sup&gt;
--&gt;

* See &lt;a name=cite-twittertrauma2017&gt;&lt;/a&gt;[Callcut, Moore, Wakam, Hubbard, and Cohen (2017)](https://doi.org/10.1371/journal.pone.0186118)

&lt;!--
.footnote[1: [Callcut, Moore, Wakam, et al. (2017)](https://doi.org/10.1371/journal.pone.0186118)]
--&gt;

---

# Related work

* From Alan: &lt;a name=cite-twitterdengue2017&gt;&lt;/a&gt;[Marques-Toledo, Degener, Vinhal, Coelho, Meira, Code√ßo, and Teixeira (2017)](https://doi.org/10.1371/journal.pntd.0005729)
* In dropbox folder:
    * &lt;a name=cite-houstonetal2015&gt;&lt;/a&gt;[Houston, Hawthorne, Perreault, Park, Goldstein Hode, Halliwell, Turner McGowen, Davis, Vaid, McElderry, and Griffith (2015)](http://dx.doi.org/10.1111/disa.12092)
    * &lt;a name=cite-sewolferry2015&gt;&lt;/a&gt;[Woo, Cho, Shim, Lee, and Song (2015)](https://doi.org/10.3390/ijerph120910974)
    * &lt;a name=cite-japanearthquake2014&gt;&lt;/a&gt;[Jung and Moro (2014)](http://dx.doi.org/10.1111/disa.12071)
    * &lt;a name=cite-spatiotemporal2014&gt;&lt;/a&gt;[Cheng and Wicks (2014)](https://doi.org/10.1371/journal.pone.0097807)
    * &lt;a name=cite-bostonbombing2015&gt;&lt;/a&gt;[Sutton, Gibson, Spiro, League, Fitzhugh, and Butts (2015)](https://doi.org/10.1371/journal.pone.0134452)

---

# Objectives

Use real-time social media data to:

* detect mass-casualty incidents and/or
* predict location-specific trauma center volume.

Goal: to build an early warning system for trauma centers.

???

WHO: MCI = an event which generates more patients at one time than locally available resources can manage using routine procedures.

---

# Data

* Pilot analysis: Historical Twitter data on
  * Asiana Airlines crash at SFO (Jul 2013, `\(n \approx 400\)`k),
  * South Napa earthquake (Aug 2014, `\(n \approx 200\)`k),
  * Boston Marathon bombing (Apr 2013, `\(n \approx 1.1\)` mil),
  * Marysville Pilchuck High School shooting (Oct 2014, `\(n \approx 250\)`k), and
    * Sandy Hook Elementary School shooting (Dec 2012, `\(n \approx 1.8\)` mil).
* Early 2016: collected add'l data via streaming API.

???

Observations summarized here include only those with a `postedTime` after the event time and prior to the end of the collection period (typically 7 days after the start of the collection period). When more than 20 levels of a factor exist, only the first 20 are displayed. Counts of missing values are excluded from graphical summaries. one row corresponds to one tweet (or retweet). Boxplots are displayed for continuous variables, with a green cross denoting the mean of that variable.

---

# Exploratory Analyses

&lt;!--
[Link](file:///Users/fpgcdi/Dropbox/Trauma\ and\ Coagulation\ \(White\ Space\ Conflict\)/Twitter/prelim_analysis/index.html)
--&gt;

---

class: fullscreen, middle, center



---

class: fullscreen, middle, center





---

# Acquiring Twitter data

* [Twitter's REST APIs](https://dev.twitter.com/rest/public)
    - Conduct singular searches, read user profile information, or post Tweets.
  - Most common: [Twitter Search API](https://dev.twitter.com/rest/public/search)
      - Limitations: [Rate limited](https://dev.twitter.com/rest/public/rate-limits) (max number of queries every 15 mins), max 100 tweets returned per query, only past 7 days, may not be complete
* [Twitter's Streaming API](https://dev.twitter.com/streaming/overview)
    - Monitor or process Tweets in real-time.
    - Most common: [Public streams](https://dev.twitter.com/streaming/public) &amp;rarr; [POST statuses/filter](https://dev.twitter.com/streaming/reference/post/statuses/filter)
      - Returns public statuses that match one or more filter predicates.
      - Limitations: one connection at a time allowed per account, subject to streaming cap (max out at small percentage of total tweet volume), frequent reconnects may result in rate limiting/brief IP blocking

---

# Acquiring Twitter data, continued

* [Gnip](https://gnip.com/) (now owned by Twitter)
    - Costs &amp;#36;&amp;#36;&amp;#36;
    - Realtime
        - Most common: [PowerTrack](https://gnip.com/realtime/powertrack/): filtered firehose
    - Historical
        - [Historical PowerTrack](http://support.gnip.com/code/historical_powertrack.html): RESTful version of PowerTrack
        - [30-Day Search API](https://gnip.com/historical/30-day-search/)
        - [Full Archive Search API](https://gnip.com/historical/full-archive-search/)

???

As of April, 2015, 'firehose' access is cut off for all third-party resellers. Now it all goes through Gnip, which was acquired by Twitter in May, 2014. ([1](http://www.forbes.com/sites/benkepes/2015/04/11/how-to-kill-your-ecosystem-twitter-pulls-an-evil-move-with-its-firehose/), [2](http://thenextweb.com/dd/2015/04/11/twitter-cuts-off-firehose-resellers-as-it-brings-data-access-fully-in-house/), [3](http://www.infoworld.com/article/2908869/big-data/twitters-firehose-shut-off-is-the-newest-hazard-of-the-api-economy.html))

---

# Processing Twitter data

- In R: See CRAN's ["Web Technologies" package collection](https://cran.r-project.org/web/views/WebTechnologies.html), particularly the "parsing Data from the Web" and "social media" sections
- Not in R: Twitter's list of tools for [other programming languages](https://dev.twitter.com/overview/api/twitter-libraries)

---

# Processing Twitter data in R

.pull-left[

* Parsing JSON (javascript object notation) files:
  * [rjson](https://cran.r-project.org/web/packages/rjson/index.html),
  * [RJSONIO](https://cran.r-project.org/web/packages/RJSONIO/index.html), and
  * **[jsonlite](https://cran.r-project.org/web/packages/jsonlite/index.html)**.
* Reading from REST APIs:
    * **twitteR** ([CRAN](https://cran.r-project.org/web/packages/twitteR/index.html)/[github](https://github.com/geoffjentry/twitteR))
    * [RTwitterAPI](https://github.com/joyofdata/RTwitterAPI)
* Reading from Streaming API:
    * **streamR** ([CRAN](https://cran.r-project.org/web/packages/streamR/index.html)/[github](https://github.com/pablobarbera/streamR))
    * tweet2r ([CRAN](https://cran.r-project.org/web/packages/tweet2r/index.html)/[github](https://github.com/pauarago/tweet2r))

]

.pull-right[

* Authenticating via OAuth:
    * ROAuth ([CRAN](https://cran.r-project.org/web/packages/ROAuth/index.html)/[github](https://github.com/geoffjentry/ROAuth))
* Other Resources:
   * Workshop materials and slides: [Analyzing and Collecting Social Media Data with R](https://github.com/pablobarbera/social-media-workshop)

]

---

# Visualization

.pull-left[

[htmlwidgets](http://www.htmlwidgets.org/) (interactive JavaScript-based graphics from within R):
* [sparkline](https://github.com/htmlwidgets/sparkline) for small inline Tufte-style plots
* [DT](http://rstudio.github.io/DT/) (aka DataTables)
* [dygraphs](https://rstudio.github.io/dygraphs/) for time series
* [streamgraph](http://hrbrmstr.github.io/streamgraph/), also for time series
* [leaflet](https://rstudio.github.io/leaflet/) for mapping
* etc.

]

.pull-right[

* Use with [R Markdown](http://rmarkdown.rstudio.com) or [Shiny](http://shiny.rstudio.com/)
* **[Gallery of htmlwidgets](http://hafen.github.io/htmlwidgetsgallery/)**

]

---
class: inverse, middle, center

# Questions?

---

# References

&lt;a name=bib-spatiotemporal2014&gt;&lt;/a&gt;[[1]](#cite-spatiotemporal2014)
T. Cheng and T. Wicks. "Event Detection using Twitter: A
Spatio-Temporal Approach". In: _PLOS ONE_ 9.6 (Jun. 2014), pp.
1-10. URL:
[https://doi.org/10.1371/journal.pone.0097807](https://doi.org/10.1371/journal.pone.0097807).

&lt;a
name=bib-japanearthquake2014&gt;&lt;/a&gt;[[2]](#cite-japanearthquake2014)
J. Jung and M. Moro. "Multi-level functionality of social media in
the aftermath of the Great East Japan Earthquake". In: _Disasters_
38.s2 (2014), pp. s123-s143. ISSN: 1467-7717. URL:
[http://dx.doi.org/10.1111/disa.12071](http://dx.doi.org/10.1111/disa.12071).

&lt;a name=bib-houstonetal2015&gt;&lt;/a&gt;[[3]](#cite-houstonetal2015) J. B.
Houston, J. Hawthorne, M. F. Perreault, et al. "Social media and
disasters: a functional framework for social media use in disaster
planning, response, and research". In: _Disasters_ 39.1 (2015),
pp. 1-22. ISSN: 1467-7717. URL:
[http://dx.doi.org/10.1111/disa.12092](http://dx.doi.org/10.1111/disa.12092).

&lt;a name=bib-bostonbombing2015&gt;&lt;/a&gt;[[4]](#cite-bostonbombing2015)
J. Sutton, C. B. Gibson, E. S. Spiro, et al. "What it Takes to Get
Passed On: Message Content, Style, and Structure as Predictors of
Retransmission in the Boston Marathon Bombing Response". In: _PLOS
ONE_ 10.8 (Aug. 2015), pp. 1-20. URL:
[https://doi.org/10.1371/journal.pone.0134452](https://doi.org/10.1371/journal.pone.0134452).

&lt;a name=bib-sewolferry2015&gt;&lt;/a&gt;[[5]](#cite-sewolferry2015) H. Woo,
Y. Cho, E. Shim, et al. "Public Trauma after the Sewol Ferry
Disaster: The Role of Social Media in Understanding the Public
Mood". In: _International Journal of Environmental Research and
Public Health_ 12.9 (2015), pp. 10974-10983. URL:
[https://doi.org/10.3390/ijerph120910974](https://doi.org/10.3390/ijerph120910974).

&lt;a name=bib-twittertrauma2017&gt;&lt;/a&gt;[[6]](#cite-twittertrauma2017)
R. A. Callcut, S. Moore, G. Wakam, et al. "Finding the signal in
the noise: Could social media be utilized for early hospital
notification of multiple casualty events?" In: _PLOS ONE_ 12.10
(Oct. 2017), pp. 1-12. URL:
[https://doi.org/10.1371/journal.pone.0186118](https://doi.org/10.1371/journal.pone.0186118).

&lt;a name=bib-twitterdengue2017&gt;&lt;/a&gt;[[7]](#cite-twitterdengue2017)
C. d. A. Marques-Toledo, C. M. Degener, L. Vinhal, et al. "Dengue
prediction by the web: Tweets are a useful tool for estimating and
forecasting Dengue at country and city level". In: _PLOS Neglected
Tropical Diseases_ 11.7 (Jul. 2017), pp. 1-20. URL:
[https://doi.org/10.1371/journal.pntd.0005729](https://doi.org/10.1371/journal.pntd.0005729).

---

# Credits

#### Built using [xaringan](https://github.com/yihui/xaringan) with
+ [knitr](http://yihui.name/knitr),
+ [R Markdown](https://rmarkdown.rstudio.com),
+ the [remark.js](https://github.com/gnab/remark/) framework,
+ the [RefManageR](https://github.com/ropensci/RefManageR/) bibliography manager, and
+ the [highlight.js](https://highlightjs.org/) syntax highlighter.

---

# Session Info

**R version 3.3.3 (2017-03-06)**

**Platform:** x86_64-apple-darwin13.4.0 (64-bit) 


**attached base packages:** 
_stats_, _graphics_, _grDevices_, _utils_, _datasets_ and _base_

**other attached packages:** 
_pander(v.0.6.1)_ and _RefManageR(v.0.14.20)_

**loaded via a namespace (and not attached):** 
_Rcpp(v.0.12.13)_, _lubridate(v.1.7.1)_, _sysfonts(v.0.7.1)_, _digest(v.0.6.12)_, _showtextdb(v.2.0)_, _rprojroot(v.1.2)_, _plyr(v.1.8.4)_, _R6(v.2.2.2)_, _jsonlite(v.1.5)_, _backports(v.1.1.1)_, _magrittr(v.1.5)_, _evaluate(v.0.10.1)_, _httr(v.1.3.1)_, _bibtex(v.0.4.2)_, _xaringan(v.0.4.4)_, _stringi(v.1.1.5)_, _xml2(v.1.1.1)_, _rmarkdown(v.1.6)_, _tools(v.3.3.3)_, _stringr(v.1.2.0)_, _showtext(v.0.5)_, _yaml(v.2.1.14)_, _htmltools(v.0.3.6)_, _knitr(v.1.17)_ and _methods(v.3.3.3)_
    </textarea>
<script src="libs/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "tomorrow-night-eighties",
"highlightLines": true
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function() {
  var d = document, s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})();</script>

<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  tex2jax: {
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre']
  }
});
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://cdn.bootcss.com/mathjax/2.7.1/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
